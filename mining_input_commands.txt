# If you hide a line with a # sign, that line will not be executed. Do not use ''' ''' in this section for the same purpose.

# The following two lines only need to be executed once per transactional dataset to transform it to the correct format. 
# Run these two lines first, after that hide them with #.

#update_dataframes(input_file = 'final_transaction_dataset_taxonomy_species')
#update_dataframes(input_file = 'final_transaction_dataset_go-slim', update_functionality_ID_file = 'counts_of_functionality_df')




# Investigating the effect of selected relative abundance threshold value on the number of species and go-slim functionalities.
# Run the following 6 lines in pairs (species+go-slim) and move the output files to another folder after each run. 
# Otherwise the 'abund_cutoff', 'abund_filtered', 'presence_absence_evaluation' output files will be overwritten.

#FPGrowth(abundance_threshold = 0.1, min_support = 0.6, input_file = "final_transaction_dataset_go-slim_new_columns")
#FPGrowth(abundance_threshold = 0.1, min_support = 0.6, input_file = "final_transaction_dataset_taxonomy_species_new_columns")

#FPGrowth(abundance_threshold = 0.05, min_support = 0.6, input_file = "final_transaction_dataset_go-slim_new_columns")
#FPGrowth(abundance_threshold = 0.05, min_support = 0.6, input_file = "final_transaction_dataset_taxonomy_species_new_columns")

#FPGrowth(abundance_threshold = 0.01, min_support = 0.6, input_file = "final_transaction_dataset_go-slim_new_columns")
#FPGrowth(abundance_threshold = 0.01, min_support = 0.6, input_file = "final_transaction_dataset_taxonomy_species_new_columns")





# The 'fpgrowth_mining...' output of the following functions wil e required for investigating the effect of selected minimum support value on the length and frequency of frequent itemsets, 
# closed itemsets and maximum frequent itemsets in case of species and go-slim functionalities.
# Keep only the 'fpgrowth_mining...' output files. The 'abund_cutoff', 'abund_filtered', 'presence_absence_evaluation' output files will be overwritten. 
# Otherwise run the lines in pairs (species+go-slim), and move the output files to a different folder after each run.

#FPGrowth(abundance_threshold = 0.1, min_support = 0.9, input_file = "final_transaction_dataset_taxonomy_species_new_columns")
#FPGrowth(abundance_threshold = 0.1, min_support = 0.9, input_file = "final_transaction_dataset_go-slim_new_columns")

#FPGrowth(abundance_threshold = 0.1, min_support = 0.8, input_file = "final_transaction_dataset_taxonomy_species_new_columns")
#FPGrowth(abundance_threshold = 0.1, min_support = 0.8, input_file = "final_transaction_dataset_go-slim_new_columns")

#FPGrowth(abundance_threshold = 0.1, min_support = 0.7, input_file = "final_transaction_dataset_taxonomy_species_new_columns")
#FPGrowth(abundance_threshold = 0.1, min_support = 0.7, input_file = "final_transaction_dataset_go-slim_new_columns")

#FPGrowth(abundance_threshold = 0.1, min_support = 0.6, input_file = "final_transaction_dataset_taxonomy_species_new_columns")
#FPGrowth(abundance_threshold = 0.1, min_support = 0.6, input_file = "final_transaction_dataset_go-slim_new_columns")

#FPGrowth(abundance_threshold = 0.1, min_support = 0.5, input_file = "final_transaction_dataset_taxonomy_species_new_columns")
#FPGrowth(abundance_threshold = 0.1, min_support = 0.5, input_file = "final_transaction_dataset_go-slim_new_columns")

#FPGrowth(abundance_threshold = 0.1, min_support = 0.4, input_file = "final_transaction_dataset_taxonomy_species_new_columns")
#FPGrowth(abundance_threshold = 0.1, min_support = 0.4, input_file = "final_transaction_dataset_go-slim_new_columns")




# Run the FPgrowth frequent itemset mining algorithm with the selected 0.6 minimum support value for species and functonality.
# All 6 lines can be run together.

#FPGrowth(abundance_threshold = 0.1, min_support = 0.6, input_file = "final_transaction_dataset_taxonomy_species_new_columns")
#FPGrowth(abundance_threshold = 0.1, min_support = 0.6, input_file = "final_transaction_dataset_taxonomy_species_HEALTHY_new_columns")
#FPGrowth(abundance_threshold = 0.1, min_support = 0.6, input_file = "final_transaction_dataset_taxonomy_species_IBD_new_columns")

#FPGrowth(abundance_threshold = 0.1, min_support = 0.6, input_file = "final_transaction_dataset_go-slim_new_columns")
#FPGrowth(abundance_threshold = 0.1, min_support = 0.6, input_file = "final_transaction_dataset_go-slim_HEALTHY_new_columns")
#FPGrowth(abundance_threshold = 0.1, min_support = 0.6, input_file = "final_transaction_dataset_go-slim_IBD_new_columns")




# It is possible to run not only FPGrowth, but also Apriori algorithm. This is optional.
# All 6 lines can be run together.

#Apriori(abundance_threshold = 0.1, min_support = 0.6, input_file = "final_transaction_dataset_taxonomy_species_new_columns")
#Apriori(abundance_threshold = 0.1, min_support = 0.6, input_file = "final_transaction_dataset_taxonomy_species_HEALTHY_new_columns")
#Apriori(abundance_threshold = 0.1, min_support = 0.6, input_file = "final_transaction_dataset_taxonomy_species_IBD_new_columns")

#Apriori(abundance_threshold = 0.1, min_support = 0.6, input_file = "final_transaction_dataset_go-slim_new_columns")
#Apriori(abundance_threshold = 0.1, min_support = 0.6, input_file = "final_transaction_dataset_go-slim_HEALTHY_new_columns")
#Apriori(abundance_threshold = 0.1, min_support = 0.6, input_file = "final_transaction_dataset_go-slim_IBD_new_columns")



# Run the following 12 lines at the same time. Ensure that the correct 'final_transaction_dataset_taxonomy_species_new_columns_abund_filtered' file is used, which was generated with the
# 'fpgrowth_mining_taxonomy_species_new_columns_abundance_threshold_0.1_min_support_0.6' file.

#Association_rules_mining('fpgrowth_mining_taxonomy_species_new_columns_abundance_threshold_0.1_min_support_0.6', 'confidence', 0.4, 'taxonomy_all_species', 'final_transaction_dataset_taxonomy_species_new_columns_abund_filtered')
#Association_rules_mining('fpgrowth_mining_go-slim_new_columns_abundance_threshold_0.1_min_support_0.6', 'confidence', 0.4, 'go-slim_all', 'final_transaction_dataset_go-slim_new_columns_abund_filtered')
#Association_rules_mining('fpgrowth_mining_taxonomy_species_new_columns_abundance_threshold_0.1_min_support_0.6', 'confidence', 0.5, 'taxonomy_all_species', 'final_transaction_dataset_taxonomy_species_new_columns_abund_filtered')
#Association_rules_mining('fpgrowth_mining_go-slim_new_columns_abundance_threshold_0.1_min_support_0.6', 'confidence', 0.5, 'go-slim_all', 'final_transaction_dataset_go-slim_new_columns_abund_filtered')
#Association_rules_mining('fpgrowth_mining_taxonomy_species_new_columns_abundance_threshold_0.1_min_support_0.6', 'confidence', 0.6, 'taxonomy_all_species', 'final_transaction_dataset_taxonomy_species_new_columns_abund_filtered')
#Association_rules_mining('fpgrowth_mining_go-slim_new_columns_abundance_threshold_0.1_min_support_0.6', 'confidence', 0.6, 'go-slim_all', 'final_transaction_dataset_go-slim_new_columns_abund_filtered')
#Association_rules_mining('fpgrowth_mining_taxonomy_species_new_columns_abundance_threshold_0.1_min_support_0.6', 'confidence', 0.7, 'taxonomy_all_species', 'final_transaction_dataset_taxonomy_species_new_columns_abund_filtered')
#Association_rules_mining('fpgrowth_mining_go-slim_new_columns_abundance_threshold_0.1_min_support_0.6', 'confidence', 0.7, 'go-slim_all', 'final_transaction_dataset_go-slim_new_columns_abund_filtered')
#Association_rules_mining('fpgrowth_mining_taxonomy_species_new_columns_abundance_threshold_0.1_min_support_0.6', 'confidence', 0.8, 'taxonomy_all_species', 'final_transaction_dataset_taxonomy_species_new_columns_abund_filtered')
#Association_rules_mining('fpgrowth_mining_go-slim_new_columns_abundance_threshold_0.1_min_support_0.6', 'confidence', 0.8, 'go-slim_all', 'final_transaction_dataset_go-slim_new_columns_abund_filtered')
#Association_rules_mining('fpgrowth_mining_taxonomy_species_new_columns_abundance_threshold_0.1_min_support_0.6', 'confidence', 0.9, 'taxonomy_all_species', 'final_transaction_dataset_taxonomy_species_new_columns_abund_filtered')
#Association_rules_mining('fpgrowth_mining_go-slim_new_columns_abundance_threshold_0.1_min_support_0.6', 'confidence', 0.9,'go-slim_all', 'final_transaction_dataset_go-slim_new_columns_abund_filtered')



# Run the Association rules mining with 0.7 minimum confidence value. Run all 6 lines together. Ensure that the correct 'abund_filtered' files are used as input.

#Association_rules_mining('fpgrowth_mining_taxonomy_species_new_columns_abundance_threshold_0.1_min_support_0.6', 'confidence', 0.7, 'taxonomy_all_species', 'final_transaction_dataset_taxonomy_species_new_columns_C')
#Association_rules_mining('fpgrowth_mining_taxonomy_species_HEALTHY_new_columns_abundance_threshold_0.1_min_support_0.6', 'confidence', 0.7, #'taxonomy_species_HEALTHY','final_transaction_dataset_taxonomy_species_HEALTHY_new_columns_abund_filtered')
#Association_rules_mining('fpgrowth_mining_taxonomy_species_IBD_new_columns_abundance_threshold_0.1_min_support_0.6', 'confidence', 0.7, 'taxonomy_species_IBD', #'final_transaction_dataset_taxonomy_species_IBD_new_columns_abund_filtered')

#Association_rules_mining('fpgrowth_mining_go-slim_new_columns_abundance_threshold_0.1_min_support_0.6', 'confidence', 0.7, 'go-slim_all', 'final_transaction_dataset_go-slim_new_columns_abund_filtered')
#Association_rules_mining('fpgrowth_mining_go-slim_HEALTHY_new_columns_abundance_threshold_0.1_min_support_0.6', 'confidence', 0.7,'go-slim_HEALTHY', 'final_transaction_dataset_go-slim_HEALTHY_new_columns_abund_filtered')
#Association_rules_mining('fpgrowth_mining_go-slim_IBD_new_columns_abundance_threshold_0.1_min_support_0.6', 'confidence', 0.7, 'go-slim_IBD', 'final_transaction_dataset_go-slim_IBD_new_columns_abund_filtered')



# It is possible to run the Association rules mining algorithm with the minimum lift. It is optional.

#Association_rules_mining('fpgrowth_mining_taxonomy_species_new_columns_abundance_threshold_0.1_min_support_0.6', 'lift', 1.2, 'taxonomy_all_species', 'final_transaction_dataset_taxonomy_species_new_columns_C')
#Association_rules_mining('fpgrowth_mining_taxonomy_species_HEALTHY_new_columns_abundance_threshold_0.1_min_support_0.6', 'lift', 1.2, #'taxonomy_species_HEALTHY','final_transaction_dataset_taxonomy_species_HEALTHY_new_columns_abund_filtered')
#Association_rules_mining('fpgrowth_mining_taxonomy_species_IBD_new_columns_abundance_threshold_0.1_min_support_0.6', 'lift', 1.2, 'taxonomy_species_IBD', #'final_transaction_dataset_taxonomy_species_IBD_new_columns_abund_filtered')

#Association_rules_mining('fpgrowth_mining_go-slim_new_columns_abundance_threshold_0.1_min_support_0.6', 'lift', 1.2, 'go-slim_all', 'final_transaction_dataset_go-slim_new_columns_abund_filtered')
#Association_rules_mining('fpgrowth_mining_go-slim_HEALTHY_new_columns_abundance_threshold_0.1_min_support_0.6', 'lift', 1.2,'go-slim_HEALTHY', 'final_transaction_dataset_go-slim_HEALTHY_new_columns_abund_filtered')
#Association_rules_mining('fpgrowth_mining_go-slim_IBD_new_columns_abundance_threshold_0.1_min_support_0.6', 'lift', 1.2, 'go-slim_IBD', 'final_transaction_dataset_go-slim_IBD_new_columns_abund_filtered')














